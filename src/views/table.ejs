<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>



</head>
<body>
<div class="testbox">
    <% if(users.length) { %>
    <table class="styled-table">
        <thead>
        <tr>
            <th>ID</th>
            <th>Name</th>
            <th>Idade</th>
            <th>Email</th>
            <th>Ações</th>
        </tr>
        </thead>
        <tbody>
        <% for(var i = 0; i< users.length; i++) { %>
        <tr class="active-row">
            <td><%= users[i].id%></td>
            <td><%= users[i].name%></td>
            <td><%= users[i].age%></td>
            <td><%= users[i].email%></td>
            <td>
                <a href="/update-user?id=<%=users[i].id%>" >
                <button class="btn-edit">Editar</button>
                </a>
                <a href="/delete-user?id=<%=users[i].id%>">
                    <button class="btn-delete">
                        Deletar
                    </button>
                </a>
            </td>
        </tr>
        <% } %>
        </tbody>
    </table>
    <% } %>
</div>

<script type="text/javascript">
  var apiUrl = 'http://localhost:3000/users';
  var users ={};
  function teste(users){
    return users
  }

  fetch(apiUrl).then(response => {
    return response.json();
  }).then(data => {
    // Work with JSON data here
    users = data;
    console.log(data);
    return data
  }).catch(err => {
    // Do something for an error here
  });
</script>

</body>
</html>